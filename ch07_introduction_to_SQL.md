---
marp: true
theme: default
class: invert
size: 16:9
paginate: true
footer: 國立陽明交通大學 電子與光子學士學位學程
headingDivider: 1
style: |
  section::after {
    content: attr(data-marpit-pagination) '/' attr(data-marpit-pagination-total);
  }
  .columns {
    display: grid;
    grid-template-columns: repeat(2, minmax(0, 1fr));
    gap: 1rem;
  }
  .middle-grid {
    display: grid;
    grid-template-columns: repeat(2, minmax(0, 1fr));
    gap: 1rem;
  }
  .middle-grid img {
    width: 75%;
  }
  .grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 10px;
  }
  .grid img {
    width: 100%;
  }
  .red-text {
    color: red;
  }
  
  .blue-text {
    color: blue;  
  }

  .brown-text {
    color: brown;  
  }

  .small-text {
    font-size: 0.80rem;
  }
---
# Chapter7: Introduction to Structured Query Language (SQL)
- SQL is composed of commands that enable users
  -  create database and table structures
  -  perform various types of data manipulation
  -  execute data administration
  -  query the database to extract useful information.
- All RDBMS supports SQL, and many software vendors have developed extensions to the basic SQL command set.
- The ability to retrieve data from a database to satisfy business require is one of the most critical skills for database professionals.

# SQL Basics
- Described in ANSI/ISO SQL
  - The American National Standards Institute (ANSI) prescribes a standard SQL.
  - International Organization for Standardization (ISO) also accept.
- SQL functions fit into several broad categories:
  - Data manipulation language (DML)
  - Data definition language (DDL)
  - Transaction control language (TCL)
  - Data control language (DCL)
- SQL is a nonprocedural language

# SQL Data Manipulation Commands
![bg right:70% w:90%](restricted/CTable07_01.jpg)

# SQL Data Definition Commands
![bg right:70% w:90%](restricted/CTable07_02.jpg)

# Basic Data Types
- Numeric, Character, Date
- MySQL data types
  - SMALLINT, INT
  - FLOAT, DOUBLE
  - CHAR, VARCHAR
  - DATE, DATETIME
![bg right:60% w:100%](restricted/CTable08_01.jpg)

# Steps to Develop Database
1. Design ER model (Fig 7.1 or Fig 8.1)
2. Create database 
3. Create database schema (a logical group of database objects, like tables and indexes)
4. Insert sample data for verification

# Step1: Analyze Biz Rules to Design ER Model
- A customer may generate many invoices. Each invoice is generated by one customer.
- An invoice contains one or more invoice lines. Each invoice line is associated with
one invoice.
- Each invoice line references one product. A product may be found in many invoice lines.
- A vendor may supply many products. Some vendors do not yet supply products.
- If a product is vendor-supplied, it is supplied by only a single vendor.
- Some products are not supplied by a vendor.

# Deliverable of Step1: ER Diagram
![bg right:65% w:90%](restricted/CFig07_01.jpg)

# Step2: Create Database
- Database name is CH07_SALECO
- Database stores database schema
- CREATE DATABASE CH07_SALECO;

# Step3: Create Database Tables

<div class="columns">
<div>

## VENDOR table
```sql
CREATE TABLE VENDOR (
  V_CODE 		  INTEGER,
  V_NAME 		  VARCHAR(35) NOT NULL,
  V_CONTACT 	VARCHAR(15) NOT NULL,
  V_AREACODE 	CHAR(3) NOT NULL,
  V_PHONE 	  CHAR(8) NOT NULL,
  V_STATE 	  CHAR(2) NOT NULL,
  V_ORDER 	  CHAR(1) NOT NULL,
  PRIMARY KEY (V_CODE));
```  
</div>

<div>

## PRODUCT table
```sql
CREATE TABLE PRODUCT (
  P_CODE 	    VARCHAR(10) PRIMARY KEY,
  P_DESCRIPT 	VARCHAR(35) NOT NULL,
  P_INDATE 	  DATETIME NOT NULL,
  P_QOH 	    INTEGER NOT NULL,
  P_MIN 		  INTEGER NOT NULL,
  P_PRICE 	  NUMERIC(8,2) NOT NULL,
  P_DISCOUNT 	NUMERIC(4,2) NOT NULL,
  V_CODE 		  INTEGER,
  CONSTRAINT PRODUCT_V_CODE_FK FOREIGN KEY (V_CODE) REFERENCES VENDOR (V_CODE));
```
</div>

</div>




# SQL Queries
- Many SQL queries are used to perform actions such as adding or deleting rows or changing attribute values within tables
- Data retrieval is done in SQL using a SELECT query
- A SQL set-oriented command works over a set of rows
- A SELECT query specifies which data should be retrieved and how it should be filtered, aggregated, and displayed

# Sample Database Model
![bg right:70% w:90%](restricted/CFig07_01.jpg)

# Basic SELECT Queries
Each clause in a SELECT query performs the following functions:
- SELECT – specifies the attributes to be returned by the query
- FROM – specifies the table(s) from which the data will be retrieved
- WHERE – filters the rows of data based on provided criteria
- GROUP BY – groups the rows of data into collections based on sharing the same values in one or more attributes
- HAVING – filters the groups formed in the GROUP BY clause based on provided criteria
- ORDER BY – sorts the final query result rows in ascending or descending order based on the values of one or more attributes

# SELECT Statement Options
- Syntax
  SELECT 	columnlist
  FROM 		tablelist;
- A wildcard character is a symbol that can be used as a general substitute for other characters or commands
  - \* : all columns
  - % : matches zero or more characters
  - _ : matches exactly one character

SELECT * FROM users WHERE name LIKE 'J%'; (John, James)
SELECT * FROM products WHERE code LIKE 'A_1'; (A01, AB1)

# Table: CH07_SALECO PRODUCT
Database (Schema): CH07_SALECO
Table: PRODUCT
![bg right:70% w:90%](restricted/CFig07_02.jpg)

# Select an Entire PRODUCT Table
1. SELECT * 
   FROM CH07_SALECO.PRODUCT;
2. USE CH07_SALECO;
   SELECT * 
   FROM PRODUCT;
  <div class="middle-grid">
    <img src="restricted/CFig07_02.jpg" alt="">
</div> 

# Select with a Column List
SELECT P_CODE, P_DESCRIPT, P_PRICE, P_QOH 
FROM CH07_SALECO.PRODUCT;
<div class="middle-grid">
    <img src="restricted/CFig07_03.jpg" alt="">
</div>

# Using Column Aliases
SELECT P_CODE, P_DESCRIPT AS DESCRIPTION, P_PRICE AS "UNIT PRICE", P_QOH AS QTY  
FROM CH07_SALECO.PRODUCT;
<div class="middle-grid">
    <img src="restricted/CFig07_04.jpg" alt="">
</div>

# Using Computed Columns
SELECT P_DESCRIPT AS DESCRIPTION, P_PRICE AS "UNIT PRICE", P_QOH AS QTY, P_QOH * P_PRICE AS "TOTAL VALUE"  
FROM CH07_SALECO.PRODUCT;
<div class="middle-grid">
    <img src="restricted/CFig07_06.jpg" alt="">
</div>
